<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Sieg FPL - Your Fantasy Premier League Companion</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
    <!-- Include any additional scripts or styles -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=G-G3Z5Y74FG9"></script>
    <script>
      window.dataLayer = window.dataLayer || [];
      function gtag(){dataLayer.push(arguments);}
      gtag('js', new Date());
      gtag('config', 'G-G3Z5Y74FG9');
    </script>
    <script>
        function loadStoredValues() {
            const teamId = localStorage.getItem('teamId') || '';
            document.getElementById('team_id').value = teamId;

            const gameWeek = localStorage.getItem('gameWeek') || '';
            document.getElementById('game_week').value = gameWeek;

            const freeTransfers = localStorage.getItem('freeTransfers') || '';
            document.getElementById('free_transfers').value = freeTransfers;
        }

        function saveValues() {
            const teamId = document.getElementById('team_id').value;
            localStorage.setItem('teamId', teamId);

            const gameWeek = document.getElementById('game_week').value;
            localStorage.setItem('gameWeek', gameWeek);

            const freeTransfers = document.getElementById('free_transfers').value;
            localStorage.setItem('freeTransfers', freeTransfers);
        }

        window.onload = loadStoredValues;
    </script>
</head>
<body>
    <h1>Sieg FPL ðŸš€</h1>
    <h5><i>Your Fantasy Premier League Companion</i></h5>
    <div class="main-container">
        <!-- Left Side: Pitch -->
        <div class="left-container">
            <div class="pitch">
                {% if result %}
                    {% for player in result.best_11 %}
                        <div class="player {{ player.position }}" style="left: {{ player.x }}%;">
                            <div class="player-card">
                                <img
                                    src="{{ url_for('static', filename='img/shirts/shirt_' + (player.player_team|string + '_1-220.webp' if player.position == 'GK' else player.player_team|string + '-220.webp')) }}"
                                    alt="{{ player.name }}'s Shirt"
                                    class="player-shirt">
                                <div class="player-info">
                                    <span class="player-name">{{ player.web_name }}</span>
                                    <div class="player-points">{{ player.xPts }}</div>
                                </div>
                            </div>
                        </div>
                    {% endfor %}
                {% else %}
                    <!-- Optionally, display an empty pitch or a placeholder message -->
                    <p class="placeholder-message">Submit the form to see your best 11!</p>
                {% endif %}
            </div>
        </div>

        <!-- Right Side: Input Form -->
        <div class="right-container">
            <!-- Input Form -->
            <div class="container">
                {% if error %}
                    <p class="error">{{ error }}</p>
                {% endif %}
                <form method="POST" onsubmit="saveValues()">
                    <label for="team_id">Team ID</label>
                    <input type="number" id="team_id" name="team_id" required>

                    <label for="game_week">Game Week</label>
                    <input type="number" id="game_week" name="game_week" required>

                    <label for="free_transfers">Available Free Transfers</label>
                    <input type="number" id="free_transfers" name="free_transfers" required>

                    <label for="wildcard">
                        <input type="checkbox" id="wildcard" name="wildcard">
                        Using Wildcard
                    </label>

                    <input type="submit" value="Get Best Squad">
                </form>
            </div>
        </div>
    </div>
</body>
<footer>
    <p></p>
    <p>More graveyard of fleeting excitements at <a href="https://infinitetrooper.com" target="_blank">InfiniteTrooper</a>.</p>
</footer>
</html>
